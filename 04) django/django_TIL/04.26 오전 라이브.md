### REST API

#### API

어플리케이션과 프로그래밍으로 소통하는 방법



cli 명령줄로 소통

gui 그래픽, 아이콘으로 소통

api 코드 작성, 프로그래밍으로 소통



#### WEB API

웹 어플리케이션 개발에서 다른 서비스에 요청을 보내고 응답을 받기 위해 정의된 명세

지도 어플 만들때 OPEN API 받아서 사용함



#### API server

프로그래밍을 통한 요청에

json을 응답하는 서버를 만들자(사용자에게 json 데이터를 넘기자)



---------------



#### REST API

##### REST

![image-20210427230105276](REST API.assets/image-20210427230105276.png)

규칙은 아니고 하나의 방법론

1. resource(data)를 정의
2. resource에 접근하는 주소를 지정하는 방법

rest를 잘 지킨 api가 restful api

> 즉 **자원** 과 **주소**를 정의하는 것



##### REST 구성

자원(URI), 행위(Http method), 표현(Representations)



-------------------------------



##### URI

통합 자원 식별자(Uniform Resource Identifier)

인터넷 자원을 나타내는 주소

인터넷에서 자원을 식별하거나 이름을 지정하는 데 사용되는 간단한 문자열

URL과 URN의 상위개념

```
URI 구조
		IP 주소		 자원의 경로
		 host		   path
	   ---------	  -------
http://localhost:3000/posts/3
----			 -----
scheme/protocol   port
				  자원에 접근하는 기본적 GATE
				  
				  
fragment는 북마크 기능과 비슷하다(해당 문서의 특정 부분을 보여줌, 브라우저에게 알려주는 요소)
```

![image-20210427231532331](REST API.assets/image-20210427231532331.png)

전체는 URI 근데 path까지는 URL

쿼리와 fragment는 uri에 해당 x



##### URL

통합 자원 위치(Uniform Resource Locator)

예) http:// www.naver.com: 네이버 메인페이지라는 자원이 어디있는지

리소스(html, css, 이미지 등)가 어디있는지(주소)를 알려주기 위한 약속

웹주소, 링크라고도 불림

URL은 사용하는 비중이 매우 적음



##### URN

통합 자원 이름(Uniform Resource Name)

자원의 유일한 이름 역할을 함

자원의 위치가 옮겨져도 문제없이 동작

보통 직접 작성하지는 않음

ex) ISBN 0-486-27557-4



##### URL과 URN의 비교

기존 URL(주소): 서울시 강남구 테헤란로 멀티캠퍼스

만약 멀캠이 이사가면 기존 URL로는 멀캠을 찾을 수 없음

새로운 URL로 찾아야함

하지만 URN은 변경되지 않으므로 멀캠을 검색해서 갈 수는 있음

즉, URN은 자원의 ID를 정의, URL은 자원을 찾는 방법을 제공

상호보완적 관계



시리얼라이제이션(직렬화)

나중에 재구성할 수 있는 포맷으로 변환하는 과정



drf serializer는 장고의 복잡 데이터를 json이나 xml 등의 유형으로 쉽게 변환할 수 있는 파이썬 데이터 타입으로 만들어줌



언어마다 바꿔주는 타입이 다름

장고는 python 데이터 타입으로 바꿔줌(json으로 변환하기 쉬운)

이것이 장고에서의 시리얼라이제이션의 역할



장고 시리얼라이제이션 공식문서 참고

xml, json, jsonl, yaml 등으로 바꿔줌



##### URI 설계 주의사항

- 밑줄 보다 하이픈 사용(-) for 가독성

- 소문자 사용

- 파일 확장자 포함시키지 X

  

------------------



![image-20210427231800502](REST API.assets/image-20210427231800502.png)

##### HTTP 특징

- 비연결지향: 서버는 응답후 접속을 끊음
- 무상태: 접속 끊어지면 클라이언트와 서버간의 통신이 끝나며 상태 저장 X

이 두가지 특징을 보완하기 위해 쿠키와 세션을 배웠음

로그인한 사용자임을 계속 알려줌



##### HTTP Method

http: http method를 정의하여 주어진 자원에 수해앟길 원하는 행동을 나타냄

의미론적 규정이라 실제 행위가 수행됨을 보장하지 않음

예) GET 요청이 있다고 해서 문서가 주어질거라는 수행을 보장하진 않음



##### HTTP Method 종류

- GET: 특정 자원의 표시를 요청, 오직 데이터 받기만 함
- POST: 서버로 데이터 전송, 서버에 변경사항 만듦
- PUT: 요청한 주소의 자원을 수정
- DELETE: 지정 자원 삭제