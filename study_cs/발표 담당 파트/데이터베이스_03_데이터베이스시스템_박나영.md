### 데이터베이스

#### 03 데이터베이스 시스템

-------------------

##### 1. 데이터베이스 시스템의 정의

![image-20210419210645962](데이터베이스 시스템_박나영.assets/image-20210419210645962.png)

​	1) 정의

- 데이터베이스에 데이터를 저장, 이를 관리하여 조직에 필요한 정보를 생성해주는 시스템

- 컴퓨터에 있는 `데이터베이스`, 이를 관리하는 `데이터베이스 관리 시스템`, 사용자와의 소통을 위한 `데이터 언어`까지 일컫는 말



##### 2. 데이터베이스의 구조

1) 정의 

- `스키마`

  - 데이터베이스에 저장되는 데이터 구조와 제약조건을 정의한 것

  - ![image-20210418201538718](C:\Users\na0i\AppData\Roaming\Typora\typora-user-images\image-20210418201538718.png)

  - 전체적인 뼈대를 정의

  - 동적으로 변하지  X

    

- `인스턴스`

  - 스키마에 따라 데이터베이스에 실제로 저장된 값

  - 스키마와 달리 변동성이 있다(고객 추가와 삭제)

    

- employee 예시

  ![image-20210418201749969](C:\Users\na0i\AppData\Roaming\Typora\typora-user-images\image-20210418201749969.png)

  - 스키마: eNo, name, ssn, salary, dept로 구성 + 그에 해당하는 타입
  - 인스턴스: 실제 값



2) 3단계 데이터베이스 구조

- `3단계` 나누기

  - 외부단계: 개별 사용자 관점
  - 개념단계: 조직 전체의 관점
  - 내부단계: 물리적인 저장 장치의 관점
  - ![image-20210418204517898](C:\Users\na0i\AppData\Roaming\Typora\typora-user-images\image-20210418204517898.png)

  

- 외부단계(사용자 관점)

  ```
  - 데이터베이스를 개별 사용자 관점에서 이해하고 표현하는 단계
  - 추상화가 많이 이루어진 단계(내부 → 외부 단계로 갈수록 높아짐)
  - 데이터베이스 하나에 여러 외부 스키마가 존재 할 수 있다.
  - 필요한 데이터만을 추출해 보는 외부스키마는 개념스키마의 부분집합이 될 수 밖에 없습니다.
  - EX) 집주인 관점과 유사
  	  ○ 2001호 거주자는 2001호의 데이터만 궁금할 것
  	  
  	  
  * 외부 스키마(서브 스키마)
   - 각 사용자가 생각하는 데이터베이스의 모습
   - 외부단계에서 사용자에게 필요한 데이터베이스를 정의한 것
   EX) 고객 분석팀 → 성별, 나이, 직업 필드를 가진 외부 스키마
   	 상품 배송팀 → 고객번호, 이름, 주소, 연락처 필드를 가진 외부 스키마
   	 
  * 추상화
  사용자와 데이터베이스의 물리적인 구조는 관심사가 전혀 다르며, 그 관심사에 따라 알아야 할 부분과 알지 않아도 될 부분이 나뉩니다. 알지 않아도 되는 부분은 드러내지 않는데 이를 ‘추상화’
  ```



- 개념단계(조직 전체 관점)

  ```
  - 스키마의 형태를 저장
  - 데이터를 어떻게 개념화 해야할지 생각하는 단계
  - 조직 전체의 관점에서 이해하고 표현하는 단계
  - 데이터베이스 하나당 하나의 개념 스키마 존재
  - 개발하는데 필요한 모든 데이터베이스를 정의해 놓은 것
  - EX) 아파트 관리인 관점과 유사
  	  ○ 2001호 뿐만 아니라 101동 ~ 109동 모든 데이터에 대한 개념
  
  
  * 개념 스키마
   - 개념 단계에서 데이터베이스 전체의 논리적 구조를 정의한 것
   - 데이터간 관계, 제약조건, 보안정책, 접근 권한 등에 대한 정의를 포함
  ```

  

- 내부단계(저장 장치 관점)

  ```
  - 데이터베이스를 저장장치의 관점에서 이해하고 표현하는 단계
  - 물리적 저장장치에 데이터베이스가 실제로 저장되는 방법의 표현
  - 인덱스, 데이터 레코드의 배치 방법, 데이터 압축 등에 관한 사항이 포함됨
  - 내부 스키마를 어떤 식으로 가져와야할지
  - 데이터베이스 하나당 하나의 내부 스키마 존재
  - EX) 건설 업체의 관점과 유사
  	  ○ 공사를 어떻게 할지, 뼈대를 어떻게 구축할지
  	  ○ 물리적으로 어떻게 조작하고 운영할지 고민하는 단계
  						
  
  * 내부 스키마
   - 저장 장치에 실제로 저장되는 방법을 정의
   - 레코드 구조, 필드 크기, 레코드 접근 등 물리적 저장 구조를 의미
  ```



- ![image-20210418234744881](C:\Users\na0i\AppData\Roaming\Typora\typora-user-images\image-20210418234744881.png)



3) 3단계 데이터베이스 구조의 매핑

- 스키마 사이의 대응 관계

  - 외부/개념 사상(응용 인터페이스): 외부 스키마 - 개념 스키마

    외부 스키마의 데이터가 개념 스키마의 어느 부분에 해당되는지 대응시킴

  - 개념/내부 사상(저장 인터페이스): 개념 스키마 - 내부 스키마

    개념 스키마의 데이터가 내부 스키마의 물리적 장치 어디에 어떤 방법으로 저장되는지 대응

- 미리 정의된 사상 정보를 이용해 사용자가 원하는 데이터에 접근

- `데이터 독립성`의 실현이 가능

  HOW? 하위 스키마를 변경해도 상위 스키마가 영향을 받지 않으므로

  - 논리적 데이터 독립성
    - 개념 스키마가 변경되어도 외부 스키마에 영향 X
    
    - 개념 스키마 변경시 관련 외부/개념 사상만 수정하면 됨
    
    - 우리가 카카오톡에서 친구들 목록을 본다고 가정합시다. 이때 카카오 선물의 빼빼로 가격이 1000원 올랐다고 하여도 우리가 직접 다루고 있는 테이블이 아니기 때문에 영향을 주지 않습니다.
    
      예, 개념 스키마의 테이블을 생성하거나 변경할 경우, 외부 스키마가 직접 다루는 테이블이 아니면 영향을 없다.
  - 물리적 데이터 독립성
    - 내부 스키마가 변경되어도 개념 스키마에 영향 X
    - 내부 스키마 변경시 관련 개념/내부 사상만 수정하면 됨
    - 우리가 공간의 효율성을 위해서 VARCHAR(100)의 주소라는 속성을 VARCHAR(50)으로 바꾼다고 가정할 때, 우리가 주소의 크기를 줄여도 개념 스키마에는 영향을 주지 않음
    - 저장 장치 구조 변경과 같이 내부 스키마가 변경되어도 개념스키마에 영향이 없도록 하는 개념




##### 3. 데이터베이스 사용자

```
이용 목적에 따라 데이터베이스 관리자, 최종 사용자, 응용 프로그래머로 구분
```

![image-20210418235108010](C:\Users\na0i\AppData\Roaming\Typora\typora-user-images\image-20210418235108010.png)



1) 데이터베이스 관리자

-  데이터베이스 시스템을 총괄하는 사람

- DB 시스템을 운영 및 관리
- 주로 데이터 정의어(테이블 만드는)와 제어어를 사용
- 데이터 설계, 구현, 유지보수의 전 과정을 담당. 또한 데이터베이스 사용자 통제, 보안, 성능 모니터링, 데이터 전체 파악 및 관리, 데이터 이동 및 복사 등 제반업무
- ![image-20210418205633502](C:\Users\na0i\AppData\Roaming\Typora\typora-user-images\image-20210418205633502.png)



2) 최종 사용자(일반 사용자)

- 보통 특별한 지식 없이 데이터베이스에 접근하여 데이터의 검색, 삽입, 삭제, 수정 작업

- DB에 접근해 DB를 조작(삽입, 검색, 수정, 삭제 등)
- 주로 데이터 조작어를 사용
- 캐주얼 사용자, 초보 사용자로 구분



3) 응용 프로그래머

- 일반 사용자가 사용할 수 있도록 프로그램을 만든다.

- 데이터 언어를 삽입하여 응용 프로그램을 작성
- 주로 데이터 조작어를 사용
- EX) 고객 관련 데이터에 대한 이해도 필요



##### 4. 데이터 언어

```
데이터 언어: 사용자와 데이터베이스 관리 시스템간 통신 수단
```

1) 데이터 정의어(DDL): 스키마를 정의, 수정, 삭제를 위해 사용

데이터 정의어로 정의된 스키마는 데이터 사전에 저장되고, 삭제나 수정이 발생하면 이 내용도 데이터 사전에 반영



2) 데이터 조작어(DML): 데이터 삽입, 삭제, 수정, 검색 등의 처리를 요구하기 위해 사용

- 절차적 데이터 조작어

  - 사용자가 어떤 데이터를 원하고(WHAT) 그 데이터를 얻기 위해 어떻게 처리해야하는지(HOW)도 설명

- 비절차적 데이터 조작어

  - 사용자가 어떤 데이터를 원하는지만(WHAT) 설명

  - SQL은 여기에 해당

    

3) 데이터 제어어(DCL): 내부적으로 필요한 규칙 및 기법을 정의하기 위해 사용

- 사용목적
  - 무결성: 정확하고 유효한 데이터만 유지
  - 보안: 허가된 사용자에게 권한 부여(허가받지 X 사용자의 데이터 접근 차단)
  - 회복: 장애가 발생해도 데이터 일관성 유지
  - 동시성 제어: 동시 공유 지원



##### 5.  데이터베이스 관리 시스템

```
데이터베이스 관리와 사용자의 데이터 처리 요구 수행
```

- 주요 구성 요소

  - 질의 처리기
    
    - 사용자의 데이터 처리 요구를 해석하여 처리
    
  - 저장 데이터 관리자
  - 디스크에 저장된 사용자 데이터베이스와 데이터 사전 관리
    - 실제 접근 역할
    
  - 컴파일러
  
    특정 프로그래밍 언어로 쓰여 있는 문서를 다른 프로그래밍 언어로 옮기는 프로그램
  
    우리가 작성한 고급 프로그래밍 언어는 컴퓨터가 이해할 수 있는 언어(기계어)로 변환해주어야 실행
    DBMS 에서도 마찬가지로 사용자가 작성한 데이터 언어가 수행될 수 있도록 컴파일러가 변환해주는 것
  
  ![image-20210418210500762](C:\Users\na0i\AppData\Roaming\Typora\typora-user-images\image-20210418210500762.png)